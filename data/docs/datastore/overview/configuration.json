{
  "content": "<h1 id=\"configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#configuration\">#</a>Configuration</h1>\n<h3 id=\"cluster-configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#cluster-configuration\">#</a>Cluster Configuration</h3>\n<p>When you deploy multiple Cloud Nodes, you will need to cluster them to centralize services used by your node like storage, statistics and payments. See <a href=\"/docs/datastore/advanced/hosted-services\">Hosted Services</a> for more details.</p>\n<p>Many of these settings are available when you start a <a href=\"https://ulixee.org/docs/cloud\">Cloud Node</a> with the Ulixee CLI.</p>\n<pre class=\"ulixeeTheme\"><code class=\"language-bash\">$ npx @ulixee/cloud start --help\n</code></pre>\n<ul>\n<li><strong>--hosted-services-port <number></strong> Activate hosted services on this node at this port (datastore registry, node registry). Defaults to any 18181, or any available port (0). (env: <code>ULX_HOSTED_SERVICES_PORT</code>)</li>\n<li><strong>--hosted-services-hostname <hostname></strong> The ip or host that Cluster Services should listed on. You should make this a private-to-your-cloud ip if possible. (env: <code>ULX_HOSTED_SERVICES_HOSTNAME</code>)</li>\n</ul>\n<p>NOTE: most of the time, you will only setup this url for any cluster nodes that need to connect to the hosted services.</p>\n<ul>\n<li><strong>--setup-host <host></strong> Setup services for this node with another node in your cluster. NOTE: this should be the hosted services address of\nyour cluster node. (env: <code>ULX_SERVICES_SETUP_HOST</code>)</li>\n</ul>\n<p>If you need to configure the services directly, you can use the following environment variables:</p>\n<pre class=\"ulixeeTheme\"><code class=\"language-ini\">ULX_DATASTORE_STATS_HOST=# Stats Tracker Service Host\nULX_DATASTORE_REGISTRY_HOST=# Datastore Registry Service Host\nULX_STORAGE_ENGINE_HOST=# Storage Engine Service Host\nULX_REPLAY_REGISTRY_HOST=# Replays Storage/Retrieval Host\nULX_PAYMENT_PROCESSOR_HOST=# A Payment Processor Service Host (processes payments)\nULX_UPSTREAM_PAYMENTS_SERVICE_HOST=# Payment Services Host\nULX_DATASTORE_LOOKUP_SERVICE_HOST=# Datastore Lookup Service Host\n</code></pre>\n<h3 id=\"argon-payment-configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#argon-payment-configuration\">#</a>Argon Payment Configuration</h3>\n<p>Your Argon Localchain configuration should be setup only on a Payment Services Host. Received payments will be sent to this Localchain. In order to properly claim them, you should ensure to follow the <a href=\"/docs/datastore/basics/payments\">payment setup guide</a>.</p>\n<h4 id=\"using-the-cloud-node-cli\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#using-the-cloud-node-cli\">#</a>Using the Cloud Node Cli</h4>\n<pre class=\"ulixeeTheme\"><code class=\"language-bash\">$ npx @ulixee/cloud start \\\n    --argon-localchain-path /path/to/localchain \\\n    --argon-mainchain-url wss://rpc.testnet.argonprotocol.org\n    --argon-localchain-password-interactive \n</code></pre>\n<blockquote>\n<p>Try the command <code>npx @ulixee/cloud start --help</code> for more options.</p>\n</blockquote>\n<p>OR you can tell the Cloud Node to boot up a Localchain for you:</p>\n<pre class=\"ulixeeTheme\"><code class=\"language-bash\">$ npx @ulixee/cloud start \\\n    --argon-localchain-create-if-missing \\\n    --argon-mainchain-url wss://rpc.testnet.argonprotocol.org\n</code></pre>\n<h4 id=\"environment-variables\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#environment-variables\">#</a>Environment Variables</h4>\n<p>These are the environment variables that can be used to configure the localchain connection.</p>\n<pre class=\"ulixeeTheme\"><code class=\"language-ini\">ARGON_LOCALCHAIN_PATH=# Path to the localchain\nARGON_LOCALCHAIN_CREATE_IF_MISSING=# Create a localchain if it doesn't exist\nARGON_MAINCHAIN_URL=# Default Argon mainchain host\nARGON_BLOCK_REWARDS_ADDRESS=# A vote output address for the localchain (activates vote creation)\nARGON_NOTARY_ID=1 # The preferred notary to use\n# Localchain Password Options\nARGON_LOCALCHAIN_PASSWORD_INTERACTIVE_CLI=# prompt\nARGON_LOCALCHAIN_PASSWORD_FILE=# path to file\nARGON_LOCALCHAIN_PASSWORD=# inline password\n</code></pre>\n<h3 id=\"default-connection\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#default-connection\">#</a>Default Connection</h3>\n<p>If no connectionToCore is provided to a Datastore, a localhost CloudNode connection will attempt to be automatically discovered.</p>\n<h3 id=\"storage\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#storage\">#</a>Datastore Core Storage</h3>\n<p>Datastore Core stores and retrieves <a href=\"/docs/datastore/overview/deployment\">packaged Datastores</a> from a configurable location on a machine. This directory will contain:</p>\n<ol>\n<li><code>dbx*</code>. Packaged datastores organized into folders by their <datastoreId>@v${version}.</li>\n<li><code>metadata.db</code>. A sqlite3 file containing version history of all Datastores installed locally. This index will be automatically updated if new compressed .dbx.tgz files are added to the directory.</li>\n<li><code>stats.db</code>. A sqlite3 file containing stats for runs of queries</li>\n<li><code>storage</code>. Databases created as storage engines for each Datastore. The path is the same as the dbx path.</li>\n</ol>\n<p>During boot-up, any Packaged Datastores (<code>.dbx.tgz</code>) in this directory will be automatically unpacked and loaded.</p>\n<h3 id=\"env\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#env\">#</a>Server Environment</h3>\n<p>The server environment a Datastore runs in will alter a few default settings. Current environment options are <code>development</code> and <code>production</code>. Production mode imposes the following limitations:</p>\n<ol>\n<li>All <a href=\"#admin\">Admin</a> APIs require an AdminIdentity. The Server must install one by default. If none is provided, a temporary AdminIdentity will be output on the console during startup (configured via <code>options.cloudAdminIdentities</code> or environment variable <code>ULX_CLOUD_ADMIN_IDENTITIES</code>).</li>\n<li>You cannot run <code>localScripts</code> through a Datastore Core. They must be packaged and deployed to the server.</li>\n</ol>\n<h3 id=\"admin\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#admin\">#</a>Server Admin Identities</h3>\n<p>Datastore Core installs some administrative features for built-in Datastores. This currently includes things like:</p>\n<ul>\n<li><a href=\"/docs/datastore/advanced/credits\">Credits</a>: issuing trial credits to consumers of your Datastore(s). An Admin Identity is required to create new Credits.</li>\n<li>Access for an Admin to run private javascript functions on <a href=\"/docs/datastore/basics/table\">Tables</a>, <a href=\"/docs/datastore/basics/extractor\">Extractors</a> and <a href=\"/docs/datastore/basics/crawler\">Crawlers</a>.</li>\n<li>Ability to \"upload\" packaged Datastores to a live server in <code>production</code> <a href=\"#env\">mode</a>.</li>\n</ul>\n<h4 id=\"environment-variable\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#environment-variable\">#</a>Environment Variable</h4>\n<ul>\n<li>ULX_DATASTORE_DIR <code>string</code>. Absolute path to a directory containing Datastores. Defaults to <code>&#x3C;DATA>/ulixee/datastores</code>.</li>\n<li>ULX_QUERY_HERO_SESSIONS_DIR <code>string</code>. Absolute path to a directory storing the Hero Session databases output by Datastores. Defaults to <code>&#x3C;DATA>/ulixee/query-hero-sessions</code>.</li>\n<li>ULX_CLOUD_ADMIN_IDENTITIES <code>string</code>. # A whitelist of comma separated identities (bech32 strings) who can administer this server</li>\n</ul>\n<h2 id=\"data\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#data\">#</a>Data Directory</h2>\n<p>DATA is determined as:</p>\n<ul>\n<li>Mac: ~/Library/Application Support</li>\n<li>Linux: ~/.local/share (environment variable <code>XDG_DATA_HOME</code>)</li>\n<li>Windows: ~/AppData/Local (environment variable <code>LOCALAPPDATA</code>)</li>\n</ul>",
  "title": "Configuration",
  "subtitles": [
    {
      "depth": 3,
      "value": "Cluster Configuration",
      "anchor": "#cluster-configuration"
    },
    {
      "depth": 3,
      "value": "Argon Payment Configuration",
      "anchor": "#argon-payment-configuration"
    },
    {
      "depth": 3,
      "value": "Default Connection",
      "anchor": "#default-connection"
    },
    {
      "depth": 3,
      "value": "Datastore Core Storage",
      "anchor": "#storage"
    },
    {
      "depth": 3,
      "value": "Server Environment",
      "anchor": "#env"
    },
    {
      "depth": 3,
      "value": "Server Admin Identities",
      "anchor": "#admin"
    },
    {
      "depth": 2,
      "value": "Data Directory",
      "anchor": "#data"
    }
  ]
}